{% extends 'user_master.html' %}
{% load widget_tweaks %}

{% block content %}
<section class="w-full">
    <div class="bg-gradient-to-b from-blue-800 to-blue-600 h-96"></div>
    <div class="max-w-5xl mx-auto px-6 sm:px-6 lg:px-8 mb-12">
        <div class="bg-white w-full shadow rounded p-8 sm:p-12 -mt-72">
            <div class="flex">
                <a href="{% url 'grievance_create' %}" class="ml-auto text-indigo-600">+ Create New</a>
            </div>
            <p class="text-3xl font-bold leading-7 text-center">Grievance Status</p>
            <form action="" method="post">
                <div class="md:flex items-center mt-12">
                    <div class="w-full">
                        <label class="font-semibold leading-none">Email</label>
                        <input type="email" name="email" class="w-full" required>
                    </div>
                </div>
                <div class="flex items-center justify-end w-full">
                    {% csrf_token %}
                    <button
                        class="mt-9 font-semibold leading-none text-white py-4 px-10 bg-blue-700 rounded hover:bg-blue-600 focus:ring-2 focus:ring-offset-2 focus:ring-blue-700 focus:outline-none">
                        Search
                    </button>
                </div>
            </form>

            
            {% if grievance %}
            <div class="w-full rounded border bg-gray-100 mt-4" id="result">
                <table class="table">
                    {{ grievance.as_table }}
                </table>
                
            </div>
            {% else %}
            <div class="bg-gray-100 rounded py-4 px-2 mt-4">
                Enter your email address to search.
            </div>
            {% endif %}
        </div>
    </div>
</section>

<script>
    var elements = document.querySelectorAll('#result input, textarea, select');
    elements.forEach(function(element) {
        element.disabled = true;
        element.classList.add('w-full');
        element.classList.add('bg-gray-100');
    });
</script>
{% endblock content %}